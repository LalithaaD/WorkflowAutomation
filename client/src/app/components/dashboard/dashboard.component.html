<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <button class="btn btn-primary" (click)="createWorkflow()">
      Create New Workflow
    </button>
  </div>

  <div class="loading" *ngIf="isLoading">
    <p>Loading dashboard data...</p>
  </div>

  <div class="dashboard-content" *ngIf="!isLoading">
    <!-- Stats Cards -->
    <div class="stats-grid" *ngIf="stats">
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
          <h3>{{ stats.totalWorkflows }}</h3>
          <p>Total Workflows</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">‚ö°</div>
        <div class="stat-content">
          <h3>{{ stats.totalExecutions }}</h3>
          <p>Total Executions</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-content">
          <h3>{{ stats.successfulExecutions }}</h3>
          <p>Successful</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">‚ùå</div>
        <div class="stat-content">
          <h3>{{ stats.failedExecutions }}</h3>
          <p>Failed</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìà</div>
        <div class="stat-content">
          <h3>{{ stats.successRate }}%</h3>
          <p>Success Rate</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üïí</div>
        <div class="stat-content">
          <h3>{{ stats.recentExecutions }}</h3>
          <p>Last 7 Days</p>
        </div>
      </div>
    </div>

    <!-- Recent Workflows -->
    <div class="section">
      <div class="section-header">
        <h2>Recent Workflows</h2>
        <button class="btn btn-secondary" (click)="goToWorkflows()">
          View All
        </button>
      </div>
      
      <div class="workflows-grid" *ngIf="recentWorkflows.length > 0">
        <div class="workflow-card" *ngFor="let workflow of recentWorkflows" (click)="viewWorkflow(workflow._id!)">
          <div class="workflow-header">
            <h3>{{ workflow.name }}</h3>
            <span class="workflow-status" [class.active]="workflow.isActive">
              {{ workflow.isActive ? 'Active' : 'Inactive' }}
            </span>
          </div>
          <p class="workflow-description">{{ workflow.description || 'No description' }}</p>
          <div class="workflow-stats">
            <span>{{ workflow.steps.length }} steps</span>
            <span>{{ workflow.executionCount || 0 }} executions</span>
          </div>
          <div class="workflow-footer">
            <small>Updated: {{ workflow.updatedAt | date:'short' }}</small>
          </div>
        </div>
      </div>
      
      <div class="empty-state" *ngIf="recentWorkflows.length === 0">
        <div class="empty-icon">üîß</div>
        <h3>No workflows yet</h3>
        <p>Create your first workflow to get started with automation</p>
        <button class="btn btn-primary" (click)="createWorkflow()">
          Create Workflow
        </button>
      </div>
    </div>

    <!-- Most Active Workflows -->
    <div class="section" *ngIf="hasActiveWorkflows">
      <div class="section-header">
        <h2>Most Active Workflows</h2>
        <button class="btn btn-secondary" (click)="goToLogs()">
          View Logs
        </button>
      </div>
      
      <div class="active-workflows">
        <div class="active-workflow" *ngFor="let workflow of stats?.mostActiveWorkflows">
          <div class="workflow-name">{{ workflow.workflowName }}</div>
          <div class="execution-count">{{ workflow.executionCount }} executions</div>
        </div>
      </div>
    </div>
  </div>
</div>
